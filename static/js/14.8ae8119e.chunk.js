(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[14],{1694:function(e,t,n){},1929:function(e,t,n){},1931:function(e,t,n){},1932:function(e,t,n){},1933:function(e,t,n){},1934:function(e,t,n){},2016:function(e,t,n){"use strict";n.r(t);var r,c=n(26),s=n(4),a=n.n(s),i=n(14),o=n(10),l=n(72),u=n(151),b=n(18),j=n(958),g=n(146),d=n(75),f=n(114),O=n(296),h=n(182),m=n(1695),p=n(68),w=n(64),x=(n(324),n(501),n(1929),n(0)),v=[h.d.FETCHING_ROUTE,h.d.CONFIRMING_IN_WALLET,h.d.FETCHING_FINAL_ROUTE,h.d.PROCESSING_TRANSACTION],z=function(e){var t=e.balance,n=e.isConnected,r=e.sufficientBalance,c=e.totalEthPrice,s=e.totalUsdPrice,a=e.bagStatus,i=e.fetchAssets,o=e.assetsAreInReview,l=Object(p.r)(),u=Object(p.d)(w.a.WALLET),b=v.includes(a)||u,j=n&&(b||!r||o),z=n&&(!r||a===h.d.WARNING);return Object(x.jsxs)(f.b,{className:"rgw6ez294 rgw6ez2em rgw6ezvg",children:[z&&Object(x.jsx)(f.c,{className:"m29kpj4 rgw6ez2js rgw6ez23a rgw6ez6be rgw6ez6cy rgw6ez42a rgw6ezaa rgw6ezcm",children:r?"Something went wrong. Please try again.":"Insufficient funds (".concat(Object(m.h)(t.toString())," ETH)")}),Object(x.jsxs)(f.b,{borderTopLeftRadius:z?"0":"12",borderTopRightRadius:z?"0":"12",className:"rgw6ez294 rgw6ez2em rgw6ez2js rgw6ez23a rgw6ez4gy rgw6ez48g rgw6ez6ei rgw6ez6g2",children:[Object(x.jsxs)(f.b,{gap:"4",paddingTop:"8",paddingBottom:"20",children:[Object(x.jsxs)(f.c,{justifyContent:"space-between",children:[Object(x.jsx)(d.b,{fontWeight:"semibold",className:O.k,children:"Total"}),Object(x.jsx)(d.b,{fontWeight:"semibold",className:O.k,children:"".concat(Object(m.h)(c.toString())," ETH")})]}),Object(x.jsx)(f.c,{justifyContent:"flex-end",color:"textSecondary",className:O.c,children:"".concat(Object(m.a)(s,!0))})]}),Object(x.jsxs)(f.c,{as:"button",color:"explicitWhite",className:"m29kpj6 rgw6ezca rgw6ezam rgw6ez6me rgw6ez2js rgw6ez23a rgw6ez4kg rgw6ez6ha rgw6ez69u rgw6ezcm rgw6ez68q rgw6ez42a rgw6ez3om",disabled:j,onClick:function(){n?i():l()},children:[b&&Object(x.jsx)(g.a,{size:"20px",stroke:"white"}),!n||u?"Connect wallet":a===h.d.FETCHING_FINAL_ROUTE||a===h.d.CONFIRMING_IN_WALLET?"Proceed in wallet":a===h.d.PROCESSING_TRANSACTION?"Transaction pending":"Pay"]})]})]})},N=n(46),I=n(1716),E=n(150),A=n(74),y=n(213),k=n(502),P=n(1687),R=n(1),S=n(1765),T=n(1740),C=n(238),L=n(382),_=function(e){var t=e.sectionTitle,n=e.caption,r=void 0===n?void 0:n,c=e.title,s=void 0===c?void 0:c,l=e.rows,u=e.index,b=e.openIndex,j=e.isSuccessScreen,g=void 0!==j&&j,m=Object(R.useState)(!1),p=Object(o.a)(m,2),w=p[0],v=p[1],z=l.some((function(e){return e.status!==h.f.APPROVED})),I=Object(y.m)((function(e){return e.sellAssets})),A=Object(y.m)((function(e){return e.removeAssetMarketplace})),k=function(e){if(1===u){var t,n=Object(N.a)(I);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.asset_contract.address===e.collectionAddress&&A(r,e.marketplace)}}catch(c){n.e(c)}finally{n.f()}}else A(e.asset,e.marketplace)};function P(e){var t,n,r=e,c=r.asset.newListings;return null!==(t=null===c||void 0===c||null===(n=c.find((function(e){return e.marketplace.name===r.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(R.useEffect)((function(){v(u===b)}),[u,b]);var S=!z&&l.length>0&&!g;return Object(x.jsxs)(f.c,{flexWrap:"wrap",className:O.n,marginTop:"10",marginBottom:"10",onClick:function(){return l.length>0&&v(!w)},color:S?"green":"textPrimary",children:[S&&Object(x.jsx)(E.e,{style:{marginRight:"8px"}}),t,!g&&Object(x.jsx)(E.r,{className:Object(C.default)("".concat(w?"":T.c," ").concat(T.b))}),(w||g)&&Object(x.jsxs)(f.b,{gap:"12",width:"full",paddingTop:g?"28":"auto",className:Object(C.default)(!g&&T.e),children:[r&&Object(x.jsx)(d.b,{color:"textPrimary",fontWeight:"normal",className:r,children:r}),s&&Object(x.jsx)(d.b,{color:"textSecondary",className:O.a,children:s}),Object(x.jsx)(f.b,{gap:"8",children:l.map((function(e,t){var n;return Object(x.jsxs)(f.b,{gap:"8",children:[Object(x.jsxs)(f.c,{children:[e.images.map((function(t,n){return Object(x.jsx)(d.b,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:T.d,src:t,alt:e.name},n)})),Object(x.jsx)(d.b,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",maxWidth:{sm:"max",md:e.status===h.f.REJECTED||e.status===h.f.FAILED?"120":"full"},className:O.c,children:e.name}),g?P(e)&&"".concat(Object(L.c)(Object(L.g)(null!==(n=P(e))&&void 0!==n?n:0).toString())," ETH"):e.status===h.f.APPROVED?Object(x.jsx)(E.e,{height:"20",width:"20"}):e.status===h.f.FAILED||e.status===h.f.REJECTED?Object(x.jsxs)(f.c,{gap:"4",children:[Object(x.jsx)(d.b,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(x.jsx)(E.F,{})]}):e.status===h.f.SIGNING&&Object(x.jsx)(E.Q,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===h.f.FAILED||e.status===h.f.REJECTED)&&Object(x.jsxs)(f.c,{gap:"8",justifyContent:"center",children:[Object(x.jsx)(d.b,{width:"120",as:"button",className:O.f,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),k(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(x.jsx)(d.b,{width:"120",as:"button",className:O.f,borderRadius:"12",border:"none",color:"genieBlue",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},D=n(1741),G=function(){var e=Object(b.useWeb3React)().provider,t=Object(y.m)((function(e){return e.sellAssets})),n=null===e||void 0===e?void 0:e.getSigner(),r=Object(y.j)((function(e){return e.listings})),c=Object(y.j)((function(e){return e.setListings})),s=Object(y.j)((function(e){return e.collectionsRequiringApproval})),l=Object(y.j)((function(e){return e.setCollectionsRequiringApproval})),u=Object(R.useState)(0),j=Object(o.a)(u,2),g=j[0],m=j[1],p=Object(y.j)((function(e){return e.listingStatus})),w=Object(y.j)((function(e){return e.setListingStatus})),v=Object(R.useState)(!1),z=Object(o.a)(v,2),C=z[0],L=z[1],G=Object(y.j)((function(e){return e.looksRareNonce})),B=Object(y.j)((function(e){return e.setLooksRareNonce})),F=Object(y.j)((function(e){return e.getLooksRareNonce})),W=Object(y.d)((function(e){return e.toggleBag})),U=Object(R.useRef)(G),H=Object(y.h)();Object(R.useEffect)((function(){y.j.subscribe((function(e){return U.current=e.looksRareNonce}))}),[]);var M=Object(R.useMemo)((function(){return Object(D.d)(t)}),[t]);Object(R.useEffect)((function(){(null===s||void 0===s?void 0:s.length)&&L(s.every((function(e){return e.status===h.f.APPROVED}))),!C||p!==h.f.PENDING&&p!==h.f.CONTINUE||q()}),[s,C]);var V=function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,c,i,o,u,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return w(h.f.SIGNING),t=I.b[I.a.MAINNET],e.next=6,n.getAddress();case 6:return r=e.sent,e.next=9,Object(k.p)(r);case 9:c=e.sent,B(null!==c&&void 0!==c?c:0),(null===s||void 0===s?void 0:s.some((function(e){return e.status===h.f.PAUSED})))||(w(h.f.SIGNING),m(1)),i=t.TRANSFER_MANAGER_ERC721,o=Object(N.a)(s);try{for(o.s();!(u=o.n()).done;)b=u.value,Object(D.h)(b.status)&&Object(D.a)(b,s,l,n,i,J)}catch(a){o.e(a)}finally{o.f()}case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var t=Object(i.a)(a.a.mark((function t(){var s,i,o,l,u,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}return t.abrupt("return");case 2:w(h.f.SIGNING),m(2),i=Object(N.a)(r),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=15;break}if(l=o.value,t.t0=Object(D.h)(l.status),!t.t0){t.next=13;break}return t.next=13,Object(D.g)(l,r,c,n,e,F,B,J);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),i.e(t.t1);case 20:return t.prev=20,i.f(),t.finish(20);case 23:return u=r.every((function(e){return e.status===h.f.APPROVED})),b=r.some((function(e){return e.status===h.f.PAUSED})),u?(m(0),w(h.f.APPROVED)):b||w(h.f.FAILED),t.t2=k.o,t.t3=r,t.next=30,null===n||void 0===n?void 0:n.getAddress();case 30:if(t.t5=s=t.sent,t.t4=null!==t.t5,!t.t4){t.next=34;break}t.t4=void 0!==s;case 34:if(!t.t4){t.next=38;break}t.t6=s,t.next=39;break;case 38:t.t6="";case 39:return t.t7=t.t6,t.next=42,(0,t.t2)(t.t3,t.t7);case 42:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var e,t=Object(N.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(D.e)(n,s,l)}}catch(u){t.e(u)}finally{t.f()}var a,i=Object(N.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;Object(D.e)(o,r,c)}}catch(u){i.e(u)}finally{i.f()}},Q=Object(R.useMemo)((function(){return p===h.f.APPROVED}),[p]);return Object(x.jsxs)(f.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(x.jsxs)(f.c,{className:O.k,marginBottom:"10",children:[H&&!Q&&Object(x.jsx)(d.b,{paddingTop:"4",marginRight:"4",onClick:W,children:Object(x.jsx)(E.p,{height:28,width:28})}),Q?"Success!":"Listing ".concat(t.length," NFTs"),Object(x.jsx)(d.b,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:W,children:Object(x.jsx)(E.sb,{height:28,width:28,fill:A.c.colors.textPrimary})})]}),Object(x.jsx)(f.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:Q?Object(x.jsx)(_,{sectionTitle:"Listed ".concat(r.length," item").concat(Object(P.a)(r.length)," for sale"),rows:r,index:0,openIndex:g,isSuccessScreen:!0}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(_,{sectionTitle:"Approve ".concat(s.length," collection").concat(Object(P.a)(s.length)),title:"COLLECTIONS",rows:s,index:1,openIndex:g}),Object(x.jsx)(_,{sectionTitle:"Confirm ".concat(r.length," listing").concat(Object(P.a)(r.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:r,index:2,openIndex:g})]})}),Object(x.jsx)("hr",{className:T.f}),Object(x.jsxs)(f.c,{className:O.n,marginTop:"12",marginBottom:Q?"8":"20",children:["Return if sold",Object(x.jsxs)(f.c,{className:O.o,marginLeft:"auto",marginRight:"0",children:[M,"\xa0ETH"]})]}),Q?Object(x.jsxs)(d.b,{as:"span",className:O.g,color:"textSecondary",children:["Status:"," ",Object(x.jsx)(d.b,{as:"span",color:"green200",children:"Confirmed"})]}):Object(x.jsx)(S.a,{onClick:function(){!function(){var e,t=Object(N.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object(D.f)(n,s,l)}}catch(u){t.e(u)}finally{t.f()}var a,i=Object(N.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;Object(D.f)(o,r,c)}}catch(u){i.e(u)}finally{i.f()}}(),C?q():V()},buttonText:"Start listing",showWarningOverride:H}),(p===h.f.PENDING||p===h.f.SIGNING)&&Object(x.jsx)(d.b,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:T.a,onClick:function(){J()},type:"button",children:"Stop listing"})]})},B=n(543),F=n(1785),W=n(1699),U=n(1692),H=n(1689),M=n(895),V=n(1702),q=n(326),J=n(101),Q=(n(1931),n(36)),X=n(2),Y=Object(X.keyframes)(r||(r=Object(Q.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),K=X.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],Y,Y,(function(e){return e.theme.accentActive})),Z=function(){return Object(x.jsx)(d.b,{display:"flex",position:"absolute",children:Object(x.jsx)("svg",{height:"18px",width:"18px",children:Object(x.jsx)(K,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},$=n(1764),ee=n(59),te=(n(1932),"rgw6ez12a rgw6ez18s rgw6ez69m"),ne="_1kuawch",re="rgw6ezca rgw6ezag rgw6ez6ma rgw6ez6je rgw6ez40a rgw6ez40g rgw6ez48m",ce=function(){return Object(x.jsx)(d.b,{position:"relative",background:"loadingBackground",className:te,children:Object(x.jsxs)(d.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"grey500",fontSize:"12",fontWeight:"normal",children:["Image",Object(x.jsx)("br",{}),"not",Object(x.jsx)("br",{}),"available"]})})},se=function(e){var t=e.asset,n=e.usdPrice,r=e.removeAsset,c=e.showRemove,s=e.grayscale,a=e.isMobile,i=Object(R.useState)(!1),l=Object(o.a)(i,2),b=l[0],j=l[1],g=Object(R.useState)(!1),O=Object(o.a)(g,2),h=O[0],p=O[1],w=Object(R.useState)(!t.smallImageUrl),v=Object(o.a)(w,2),z=v[0],N=v[1],I=function(){return j(!b)},A=Object(R.useRef)(null),y=c&&b;return b&&A.current&&!1===A.current.matches(":hover")&&j(!1),Object(x.jsx)(ee.b,{to:Object(m.i)(t),style:{textDecoration:"none"},children:Object(x.jsxs)(f.c,{ref:A,className:"_1kuawc1 rgw6ez28s rgw6ez2ea rgw6ez2jg rgw6ez22y rgw6ez48g rgw6ez3oa rgw6ez68q rgw6ez1ay rgw6ez69u",onMouseEnter:I,onMouseLeave:I,children:[Object(x.jsxs)(d.b,{position:"relative",display:"flex",children:[Object(x.jsx)(d.b,{display:c&&a?"block":"none",className:"rgw6ez43a rgw6ez354 rgw6ez3am",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(t)},transition:"250",zIndex:"1",children:Object(x.jsx)(E.s,{})}),!z&&Object(x.jsx)(d.b,{as:"img",src:t.smallImageUrl,alt:t.name,className:Object(C.default)(te,s&&!b&&ne),onLoad:function(){p(!0)},onError:function(){N(!0)},visibility:h?"visible":"hidden"}),!h&&Object(x.jsx)(d.b,{position:"absolute",className:"".concat(te," ").concat($.b)}),z&&Object(x.jsx)(ce,{})]}),Object(x.jsxs)(f.b,{overflow:"hidden",width:"full",color:s?"textSecondary":"textPrimary",children:[Object(x.jsx)(f.c,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:Object(x.jsx)(d.b,{className:"_1kuawcn rgw6ezam rgw6ezcg rgw6ez6je rgw6ez40g rgw6ez40a",children:t.name||t.tokenId})}),Object(x.jsxs)(f.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(x.jsx)(d.b,{className:re,children:t.collectionName}),t.collectionIsVerified&&Object(x.jsx)(E.rb,{className:"rgw6ez3sm"})]})]}),y&&!a&&Object(x.jsx)(d.b,{marginLeft:"16",className:"rgw6ezcm rgw6ezag rgw6ez6m6 rgw6ez28y rgw6ez2eg rgw6ez2js rgw6ez23a rgw6ez4gs rgw6ez48g rgw6ez69u",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(t)},children:"Remove"}),(!y||a)&&Object(x.jsxs)(f.b,{flexShrink:"0",children:[Object(x.jsx)(d.b,{className:"_1kuawcl rgw6ez3nm rgw6ezam rgw6ezcm rgw6ez3sm",children:"".concat(Object(m.h)(t.updatedPriceInfo?t.updatedPriceInfo.ETHPrice:t.priceInfo.ETHPrice)," ETH")}),Object(x.jsx)(d.b,{className:re,children:"".concat(Object(m.a)(n?parseFloat(Object(u.formatEther)(t.updatedPriceInfo?t.updatedPriceInfo.ETHPrice:t.priceInfo.ETHPrice))*n:n,!0))})]})]})})},ae=function(e){var t,n=e.asset,r=e.usdPrice,c=e.markAssetAsReviewed,s=e.top,a=e.isMobile,i=l.a.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(l.a.from(n.priceInfo.ETHPrice));return Object(x.jsxs)(f.b,{className:"rgw6ez2k4 rgw6ez23m rgw6ezjg rgw6ezoy rgw6ez4k4 rgw6ez3ny rgw6ez48g rgw6ez692 rgw6ez6i2 rgw6ez4ta rgw6ez4zs rgw6ez1ay rgw6ez68q",borderTopColor:s?"backgroundOutline":"transparent",children:[Object(x.jsxs)(f.c,{className:"rgw6ezca rgw6ezag rgw6ez6ma rgw6ez46s rgw6ez3nm",children:[i?Object(x.jsx)(E.ib,{}):Object(x.jsx)(E.hb,{}),Object(x.jsx)(d.b,{children:"Price ".concat(i?"increased":"decreased"," from ").concat(Object(m.h)(n.priceInfo.ETHPrice)," ETH")})]}),Object(x.jsx)(d.b,{style:{marginLeft:"-8px",marginRight:"-8px"},children:Object(x.jsx)(se,{asset:n,usdPrice:r,removeAsset:function(){},isMobile:a})}),Object(x.jsxs)(f.c,{gap:"12",justifyContent:"space-between",children:[Object(x.jsx)(d.b,{className:"_1kuawcd _1kuawc9 rgw6ezca rgw6ezag rgw6ez6ma rgw6ez2jg rgw6ez22y rgw6ez14g rgw6ez46m rgw6ezcm rgw6ez40y rgw6ez69u rgw6ez5i4",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(n,!1)},children:"Remove"}),Object(x.jsx)(d.b,{className:"_1kuawcb _1kuawc9 rgw6ezca rgw6ezag rgw6ez6ma rgw6ez2jg rgw6ez22y rgw6ez14g rgw6ez46m rgw6ezcm rgw6ez40y rgw6ez69u rgw6ez5ls",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(n,!0)},children:"Keep"})]})]})},ie=function(e){var t=e.assets;return Object(x.jsx)(f.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return Object(x.jsx)(d.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:ne},"preview".concat(t))}))})},oe=function(e){var t=e.assets,n=e.usdPrice,r=e.clearUnavailableAssets,c=e.didOpenUnavailableAssets,s=e.setDidOpenUnavailableAssets,a=e.isMobile,i=Object(R.useReducer)((function(e){return!e}),!1),l=Object(o.a)(i,2),u=l[0],b=l[1],j=Object(R.useState)(8),g=Object(o.a)(j,2),d=g[0],h=g[1];return Object(R.useEffect)((function(){if(d){var e=setInterval((function(){h(d-1)}),1e3);return function(){return clearInterval(e)}}c||(r(),s(!1))}),[d,r,c,s]),t&&0!==t.length?Object(x.jsxs)(f.b,{className:"rgw6ez2k4 rgw6ez23m rgw6ezjg rgw6ezoy rgw6ez4k4 rgw6ez3oa rgw6ez48g rgw6ez692 rgw6ez6i2 rgw6ez4ta rgw6ez594 rgw6ez4zs rgw6ez1ay",children:[1===t.length&&Object(x.jsx)(se,{asset:t[0],usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a}),t.length>1&&Object(x.jsxs)(f.b,{children:[Object(x.jsxs)(f.c,{justifyContent:"space-between",marginBottom:u?"12":"0",cursor:"pointer",onClick:function(){!c&&s(!0),b()},children:[Object(x.jsxs)(f.c,{gap:"12",color:"textPrimary",className:O.c,children:[!u&&Object(x.jsx)(ie,{assets:t.slice(0,5)}),"No longer available"]}),Object(x.jsx)(f.c,{color:"textSecondary",children:u?Object(x.jsx)(E.q,{}):Object(x.jsx)(E.o,{})}),!c&&Object(x.jsxs)(f.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:function(){return r()},children:[Object(x.jsx)(Z,{}),Object(x.jsx)(E.v,{})]})]}),Object(x.jsx)(f.b,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:u&&t.map((function(e){return Object(x.jsx)(se,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a},e.id)}))})]})]}):null},le=function(){var e=Object(y.d)((function(e){return e.bagStatus})),t=Object(y.d)((function(e){return e.setBagStatus})),n=Object(y.d)((function(e){return e.markAssetAsReviewed})),r=Object(y.d)((function(e){return e.didOpenUnavailableAssets})),c=Object(y.d)((function(e){return e.setDidOpenUnavailableAssets})),s=Object(y.d)((function(e){return e.itemsInBag})),a=Object(y.d)((function(e){return e.setItemsInBag})),i=Object(y.d)((function(e){return e.removeAssetFromBag})),o=Object(y.h)(),l=Object(R.useMemo)((function(){return Object(U.a)(s)}),[s]),u=Object(q.useQuery)(["fetchPrice",{}],(function(){return Object(H.a)()}),{}).data,b=Object(R.useMemo)((function(){return{unchangedAssets:l.filter((function(e){return e.status===h.c.ADDED_TO_BAG||e.status===h.c.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:l.filter((function(e){return e.status===h.c.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:l.filter((function(e){return e.status===h.c.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:l.filter((function(e){return e.status!==h.c.UNAVAILABLE}))}}),[l]),j=b.unchangedAssets,g=b.priceChangedAssets,d=b.unavailableAssets,O=b.availableItems;return Object(R.useEffect)((function(){var n=g.length>0,r=l.length>0;e!==h.d.IN_REVIEW||n||t(r?h.d.CONFIRM_REVIEW:h.d.ADDING_TO_BAG)}),[e,l,g,t]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(f.b,{display:g.length>0||d.length>0?"flex":"none",children:[d.length>0&&Object(x.jsx)(oe,{assets:d,usdPrice:u,clearUnavailableAssets:function(){return a(O)},didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:c,isMobile:o}),g.map((function(e,t){return Object(x.jsx)(ae,{asset:e,usdPrice:u,markAssetAsReviewed:n,top:0===t&&0===d.length,isMobile:o},e.id)}))]}),Object(x.jsx)(f.b,{gap:"8",children:j.map((function(e){return Object(x.jsx)(se,{asset:e,usdPrice:u,removeAsset:i,showRemove:!0,isMobile:o},e.id)}))})]})},ue=(n(1933),function(e){var t=e.numberOfAssets,n=e.toggleBag,r=e.resetFlow,c=e.isProfilePage;return Object(x.jsxs)(f.b,{gap:"4",paddingX:"32",marginBottom:"20",children:[Object(x.jsxs)(f.c,{className:"tk1lnr1 rgw6ezcg rgw6ezam rgw6ez6me rgw6ez48g rgw6ez434",children:[c?"Sell NFTs":"My bag",Object(x.jsx)(d.b,{display:"flex",padding:"2",color:"textSecondary",cursor:"pointer",onClick:n,children:Object(x.jsx)(E.j,{})})]}),t>0&&Object(x.jsxs)(d.b,{fontSize:"14",fontWeight:"normal",style:{lineHeight:"20px"},color:"textPrimary",children:[Object(P.b)(t,"NFT")," \xb7"," ",Object(x.jsx)(d.b,{as:"span",className:"tk1lnr3 rgw6ez48s rgw6ez68q rgw6ezcm",onClick:function(){r()},children:"Clear all"})]})]})}),be=(n(1934),function(e){var t,n,r=e.asset,c=Object(y.m)((function(e){return e.removeSellAsset})),s=Object(y.h)(),a=Object(R.useState)(!1),i=Object(o.a)(a,2),l=i[0],u=i[1],b=function(){return u(!l)};return Object(x.jsxs)(f.c,{paddingY:"8",position:"relative",onMouseEnter:b,onMouseLeave:b,children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(d.b,{display:s?"flex":"none",className:"ybdtja3 rgw6ez43a rgw6ez68q",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(r)},children:Object(x.jsx)("img",{className:"rgw6ez10y",src:"/nft/svgs/minusCircle.svg",alt:"Remove item"})}),Object(x.jsx)("img",{className:"rgw6ezjs rgw6ezpa rgw6ez69m rgw6ez18s rgw6ez12a",src:r.image_url,alt:r.name})]}),Object(x.jsxs)(f.b,{gap:"4",overflow:"hidden",flexWrap:"nowrap",children:[Object(x.jsx)(d.b,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",className:O.n,children:null!==(t=r.name)&&void 0!==t?t:"#".concat(r.tokenId)}),Object(x.jsx)(d.b,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",className:O.c,children:null===(n=r.collection)||void 0===n?void 0:n.name})]}),l&&!s&&Object(x.jsx)(d.b,{marginLeft:"auto",marginRight:"0",className:"rgw6ezcm rgw6ezag rgw6ez6m6 rgw6ez28y rgw6ez2eg rgw6ez2js rgw6ez23a rgw6ez4gs rgw6ez48g rgw6ez69u rgw6ez68q",onClick:function(e){e.preventDefault(),e.stopPropagation(),c(r)},children:"Remove"})]})}),je=function(){var e=Object(y.m)((function(e){return e.sellAssets}));return Object(x.jsx)(f.b,{children:e.length?e.map((function(e,t){return Object(x.jsx)(be,{asset:e},t)})):null})},ge=function(){var e=Object(J.f)().pathname.startsWith("/profile");return Object(x.jsx)(f.a,{height:"full",children:Object(x.jsxs)(f.b,{gap:e?"16":"12",children:[Object(x.jsx)(f.a,{children:e?Object(x.jsx)(E.O,{color:A.c.colors.textTertiary}):Object(x.jsx)(E.N,{color:A.c.colors.textTertiary})}),e?Object(x.jsx)("span",{className:O.n,children:"No NFTs Selected"}):Object(x.jsxs)(f.b,{gap:"16",children:[Object(x.jsx)(f.a,{className:O.n,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(x.jsx)(f.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})})},de=function(e){var t=e.top,n=e.show;return Object(x.jsx)(d.b,{marginX:"16",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})};t.default=function(){var e=Object(b.useWeb3React)().account,t=Object(y.d)((function(e){return e.bagStatus})),n=Object(y.d)((function(e){return e.setBagStatus})),r=Object(y.d)((function(e){return e.didOpenUnavailableAssets})),s=Object(y.d)((function(e){return e.setDidOpenUnavailableAssets})),g=Object(y.d)((function(e){return e.isLocked})),m=Object(y.d)((function(e){return e.setLocked})),p=Object(y.d)((function(e){return e.reset})),w=Object(y.m)((function(e){return e.reset})),v=Object(y.m)((function(e){return e.sellAssets})),N=Object(y.k)((function(e){return e.setProfilePageState})),I=Object(y.k)((function(e){return e.state})),E=Object(y.d)((function(e){return e.itemsInBag})),A=Object(y.d)((function(e){return e.setItemsInBag})),P=Object(y.d)((function(e){return e.bagExpanded})),S=Object(y.d)((function(e){return e.toggleBag})),T=Object(y.d)((function(e){return e.setTotalEthPrice})),C=Object(y.d)((function(e){return e.setTotalUsdPrice})),L=Object(y.p)(),_=L.address,D=L.balance,Q=L.provider,X=!!Q&&!!_,Y=Object(J.f)().pathname,K=Y.startsWith("/profile"),Z=Y.startsWith("/nfts")||K,$=Object(y.h)(),ee=Object(y.n)((function(e){return e.sendTransaction})),te=Object(y.n)((function(e){return e.state})),ne=Object(y.n)((function(e){return e.setState})),re=Object(R.useRef)(te),ce=Object(y.o)((function(e){return[e.setTransactionResponse]})),se=Object(o.a)(ce,1)[0],ae=Object(q.useQueryClient)(),ie=Object(R.useMemo)((function(){return Object(U.a)(E)}),[E]),oe=Object(R.useState)(!1),be=Object(o.a)(oe,2),fe=be[0],Oe=be[1],he=Object(R.useState)(!1),me=Object(o.a)(he,2),pe=me[0],we=me[1],xe=Object(R.useState)(0),ve=Object(o.a)(xe,2),ze=ve[0],Ne=ve[1],Ie=Object(q.useQuery)(["fetchPrice",{}],(function(){return Object(H.a)()}),{}).data,Ee=Object(R.useMemo)((function(){var e=ie.reduce((function(e,t){return t.status!==h.c.UNAVAILABLE?e.add(l.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),l.a.from(0));return{totalEthPrice:e,totalUsdPrice:Ie?parseFloat(Object(u.formatEther)(e))*Ie:void 0}}),[ie,Ie]),Ae=Ee.totalEthPrice,ye=Ee.totalUsdPrice,ke=Object(R.useMemo)((function(){var e=Object(j.parseEther)(D.toString());return{balance:e,sufficientBalance:!X||l.a.from(e).gte(Ae)}}),[D,Ae,X]),Pe=ke.balance,Re=ke.sufficientBalance,Se=function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ee(null===Q||void 0===Q?void 0:Q.getSigner(),ie.filter((function(e){return e.status!==h.c.UNAVAILABLE})).map((function(e){return e.asset})),t);case 4:!(n=e.sent)||re.current!==h.l.Success&&re.current!==h.l.Failed||(m(!1),Oe(!1),se(n),P&&S(),p());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var t=Object(i.a)(a.a.mark((function t(){var i,o,u,b,j,d,f,O,p,w,x,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=ie.filter((function(e){return e.status!==h.c.UNAVAILABLE})).map((function(e){return e.asset})),o=Object(W.a)(i.reduce((function(e,t){return e.add(l.a.from(t.priceInfo.ETHPrice))}),l.a.from(0)).toString()),r&&s(!1),!g&&m(!0),n(h.d.FETCHING_ROUTE),t.prev=5,t.next=8,ae.fetchQuery(["assetsRoute",o,i,e],(function(){return Object(k.j)({toSell:[o],toBuy:i,senderAddress:null!==e&&void 0!==e?e:""})}));case 8:u=t.sent,b=Object(M.a)(i,u.route),j=b.filter((function(e){return e.updatedPriceInfo})).sort(V.b),d=b.filter((function(e){return e.isUnavailable})),f=b.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),O=f.length>0,p=j.length>0,w=d.length>0,x=O||p||w,v=p||w,A([].concat(Object(c.a)(d.map((function(e){return{asset:e,status:h.c.UNAVAILABLE}}))),Object(c.a)(j.map((function(e){return{asset:e,status:h.c.REVIEWING_PRICE_CHANGE}}))),Object(c.a)(f.map((function(e){return{asset:e,status:h.c.REVIEWED}}))))),m(!1),x?v?n(p?h.d.IN_REVIEW:h.d.CONFIRM_REVIEW):(Se(u),n(h.d.CONFIRMING_IN_WALLET)):n(h.d.ADDING_TO_BAG),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(5),n(h.d.ADDING_TO_BAG);case 26:case"end":return t.stop()}}),t,null,[[5,23]])})));return function(){return t.apply(this,arguments)}}();Object(R.useEffect)((function(){y.n.subscribe((function(e){return re.current=e.state}))}),[]),Object(R.useEffect)((function(){g&&!fe&&Oe(!0)}),[g,fe]),Object(R.useEffect)((function(){P&&S()}),[Y]),Object(R.useEffect)((function(){re.current===h.l.Confirming&&n(h.d.PROCESSING_TRANSACTION),re.current!==h.l.Denied&&re.current!==h.l.Invalid||(re.current===h.l.Invalid?n(h.d.WARNING):n(h.d.CONFIRM_REVIEW),ne(h.l.New),m(!1),Oe(!1))}),[re.current]),Object(R.useEffect)((function(){T(Ae),C(ye)}),[Ae,ye,T,C]);var Ce=ie.length>0;return Object(x.jsx)(x.Fragment,{children:P&&Z?Object(x.jsxs)(B.a,{children:[Object(x.jsx)(f.b,{zIndex:$||fe?"modal":"3",className:"_1jcz50r1 rgw6ez43g rgw6ez3a4 rgw6ez3dz rgw6ez14g rgw6ez1ay rgw6ez34m rgw6ez4ha rgw6ez48g rgw6ez2kg rgw6ez244",children:K&&I===h.i.LISTING?Object(x.jsx)(G,{}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ue,{numberOfAssets:K?v.length:ie.length,toggleBag:S,resetFlow:K?w:p,isProfilePage:K}),!K&&0===ie.length&&t===h.d.ADDING_TO_BAG||K&&0===v.length&&Object(x.jsx)(ge,{}),Object(x.jsx)(de,{top:!0,show:pe&&ze>0}),Object(x.jsx)(f.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==pe&&we(t)}},className:"_1jcz50r3 rgw6ez294 rgw6ez2em rgw6ez1ug rgw6ez6kq",onScroll:function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,r=e.currentTarget.scrollHeight;Ne(t?(t+n)/r*100:0)},gap:"12",children:K?Object(x.jsx)(je,{}):Object(x.jsx)(le,{})}),Object(x.jsx)(de,{show:pe&&ze<100}),Ce&&!K&&Object(x.jsx)(z,{balance:Pe,sufficientBalance:Re,isConnected:X,totalEthPrice:Ae,totalUsdPrice:ye,bagStatus:t,fetchAssets:Te,assetsAreInReview:ie.some((function(e){return e.status===h.c.REVIEWING_PRICE_CHANGE}))}),0!==v.length&&K&&Object(x.jsx)(d.b,{marginTop:"32",marginX:"28",paddingY:"10",className:"".concat(O.e," ").concat(O.h),backgroundColor:"accentAction",textAlign:"center",onClick:function(){$&&S(),N(h.i.LISTING)},children:"Continue"})]})}),fe&&Object(x.jsx)(F.a,{onClick:function(){return g?void 0:Oe(!1)}})]}):null})}}}]);
//# sourceMappingURL=14.8ae8119e.chunk.js.map